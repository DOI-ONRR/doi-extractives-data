{"version":3,"sources":["webpack:///webpack/bootstrap 7c87a74a1c14364e3857?1a87**","webpack:///./js/components/sticky.js?88af*","webpack:///./~/stickyfill-web-module/dist/stickyfill.js?9a9a*","webpack:///./js/src/narrative.js","webpack:///./js/components/open-list-nav.js?c6a3"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;AChEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;;AClDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qCAAqC,QAAQ;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,QAAQ;AACnD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;;AAEA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kDAAkD,gBAAgB;AAClE,gDAAgD,gBAAgB;;AAEhE;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,2CAA2C,QAAQ;AACnD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,QAAQ;AACnD;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACjeD;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;;ACZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,yBAAyB,0BAA0B;;AAEnD;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW;AACX;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA,SAAS;;AAET;AACA;AACA;;AAEA;AACA,GAAG","file":"narrative.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 43);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7c87a74a1c14364e3857","(function(exports) {\n  'use strict';\n\n  var sticky = require('stickyfill-web-module')();\n  var stickies = [];\n  var doc = d3.select(document);\n  var win = d3.select(window);\n\n  [].forEach.call(\n    document.querySelectorAll('.sticky'),\n    function(el) {\n      stickies.push(el);\n      sticky.add(el);\n      if (!el.classList.contains('mobile-nav')) {\n        var isNav = el.classList.contains('sticky_nav');\n        var preSticky = document.createElement('div');\n        el.parentNode.insertBefore(preSticky, el)\n          .setAttribute('class', 'pre-sticky');\n\n        if (isNav) {\n          preSticky.classList.add('pre-sticky-small');\n        }\n      }\n    }\n  );\n\n  var watch = function() {\n    stickies.forEach(function(sticky) {\n\n      var isFixed = d3.select(sticky).style('position') === 'fixed';\n      var atTop = (sticky.lastTop !== sticky.offsetTop) || isFixed;\n      var isStuck = sticky.classList.contains('stuck');\n\n      sticky.lastTop = sticky.offsetTop;\n      if (atTop && !isStuck) {\n        sticky.classList.add('stuck');\n      } else if (!atTop && isStuck) {\n        sticky.classList.remove('stuck');\n      }\n    });\n  };\n\n  var throttledWatch = eiti.util.throttle(watch, 100);\n  doc.on('scroll.sticky', watch);\n  win.on('resize.sticky', throttledWatch);\n\n  watch();\n\n  exports.stickyfill = sticky;\n\n})(window);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/components/sticky.js\n// module id = 1\n// module chunks = 0 2 3","/*!\n * Stickyfill -- `position: sticky` polyfill\n * v. 1.1.11 | https://github.com/18F/stickyfill\n * Copyright Brian Hedberg | \n *\n * MIT License\n */\n/*!\n* Stickyfill -- `position: sticky` polyfill\n* v. 1.1.4 | https://github.com/wilddeer/stickyfill\n* Copyright Oleg Korsunsky | http://wd.dizaina.net/\n*\n* MIT License\n*/\n\n module.exports = (function(doc, win) {\n    if (!doc) {\n        doc = document;\n    }\n\n    if (!win) {\n        win = window;\n    }\n\n    var watchArray = [],\n        scroll,\n        initialized = false,\n        html = doc.documentElement,\n        noop = function() {},\n        checkTimer,\n\n        //visibility API strings\n        hiddenPropertyName = 'hidden',\n        visibilityChangeEventName = 'visibilitychange';\n\n    //fallback to prefixed names in old webkit browsers\n    if (doc.webkitHidden !== undefined) {\n        hiddenPropertyName = 'webkitHidden';\n        visibilityChangeEventName = 'webkitvisibilitychange';\n    }\n\n    //test getComputedStyle\n    if (!win.getComputedStyle) {\n        seppuku();\n    }\n\n    //test for native support\n    var prefixes = ['', '-webkit-', '-moz-', '-ms-'],\n        block = document.createElement('div');\n\n    for (var i = prefixes.length - 1; i >= 0; i--) {\n        try {\n            block.style.position = prefixes[i] + 'sticky';\n        }\n        catch(e) {}\n        if (block.style.position != '') {\n            seppuku();\n        }\n    }\n\n    updateScrollPos();\n\n    //commit seppuku!\n    function seppuku() {\n        init = add = rebuild = pause = stop = kill = noop;\n    }\n\n    function mergeObjects(targetObj, sourceObject) {\n        for (var key in sourceObject) {\n            if (sourceObject.hasOwnProperty(key)) {\n                targetObj[key] = sourceObject[key];\n            }\n        }\n    }\n\n    function parseNumeric(val) {\n        return parseFloat(val) || 0;\n    }\n\n    function updateScrollPos() {\n        scroll = {\n            top: win.pageYOffset,\n            left: win.pageXOffset\n        };\n    }\n\n    function onScroll() {\n        if (win.pageXOffset != scroll.left) {\n            updateScrollPos();\n            rebuild();\n            return;\n        }\n\n        if (win.pageYOffset != scroll.top) {\n            updateScrollPos();\n            recalcAllPos();\n        }\n    }\n\n    //fixes flickering\n    function onWheel(event) {\n        setTimeout(function() {\n            if (win.pageYOffset != scroll.top) {\n                scroll.top = win.pageYOffset;\n                recalcAllPos();\n            }\n        }, 0);\n    }\n\n    function recalcAllPos() {\n        for (var i = watchArray.length - 1; i >= 0; i--) {\n            recalcElementPos(watchArray[i]);\n        }\n    }\n\n    function recalcElementPos(el) {\n        if (!el.inited) return;\n\n        var currentMode = (scroll.top <= el.limit.start? 0: scroll.top >= el.limit.end? 2: 1);\n\n        if (el.mode != currentMode) {\n            switchElementMode(el, currentMode);\n        }\n    }\n\n    //checks whether stickies start or stop positions have changed\n    function fastCheck() {\n        for (var i = watchArray.length - 1; i >= 0; i--) {\n            if (!watchArray[i].inited) continue;\n\n            var deltaTop = Math.abs(getDocOffsetTop(watchArray[i].clone) - watchArray[i].docOffsetTop),\n                deltaHeight = Math.abs(watchArray[i].parent.node.offsetHeight - watchArray[i].parent.height);\n\n            if (deltaTop >= 2 || deltaHeight >= 2) return false;\n        }\n        return true;\n    }\n\n    function initElement(el) {\n        if (isNaN(parseFloat(el.computed.top)) || el.isCell || el.computed.display == 'none') return;\n\n        el.inited = true;\n\n        if (!el.clone) clone(el);\n        if (el.parent.computed.position != 'absolute' &&\n            el.parent.computed.position != 'relative') el.parent.node.style.position = 'relative';\n\n        recalcElementPos(el);\n\n        el.parent.height = el.parent.node.offsetHeight;\n        el.docOffsetTop = getDocOffsetTop(el.clone);\n    }\n\n    function deinitElement(el) {\n        var deinitParent = true;\n\n        el.clone && killClone(el);\n        mergeObjects(el.node.style, el.css);\n\n        //check whether element's parent is used by other stickies\n        for (var i = watchArray.length - 1; i >= 0; i--) {\n            if (watchArray[i].node !== el.node && watchArray[i].parent.node === el.parent.node) {\n                deinitParent = false;\n                break;\n            }\n        };\n\n        if (deinitParent) el.parent.node.style.position = el.parent.css.position;\n        el.mode = -1;\n    }\n\n    function initAll() {\n        for (var i = watchArray.length - 1; i >= 0; i--) {\n            initElement(watchArray[i]);\n        }\n    }\n\n    function deinitAll() {\n        for (var i = watchArray.length - 1; i >= 0; i--) {\n            deinitElement(watchArray[i]);\n        }\n    }\n\n    function switchElementMode(el, mode) {\n        var nodeStyle = el.node.style;\n\n        switch (mode) {\n            case 0:\n                nodeStyle.position = 'absolute';\n                nodeStyle.left = el.offset.left + 'px';\n                nodeStyle.right = el.offset.right + 'px';\n                nodeStyle.top = el.offset.top + 'px';\n                nodeStyle.bottom = 'auto';\n                nodeStyle.width = 'auto';\n                nodeStyle.marginLeft = 0;\n                nodeStyle.marginRight = 0;\n                nodeStyle.marginTop = 0;\n                break;\n\n            case 1:\n                nodeStyle.position = 'fixed';\n                nodeStyle.left = el.box.left + 'px';\n                nodeStyle.right = el.box.right + 'px';\n                nodeStyle.top = el.css.top;\n                nodeStyle.bottom = 'auto';\n                nodeStyle.width = 'auto';\n                nodeStyle.marginLeft = 0;\n                nodeStyle.marginRight = 0;\n                nodeStyle.marginTop = 0;\n                break;\n\n            case 2:\n                nodeStyle.position = 'absolute';\n                nodeStyle.left = el.offset.left + 'px';\n                nodeStyle.right = el.offset.right + 'px';\n                nodeStyle.top = 'auto';\n                nodeStyle.bottom = 0;\n                nodeStyle.width = 'auto';\n                nodeStyle.marginLeft = 0;\n                nodeStyle.marginRight = 0;\n                break;\n        }\n\n        el.mode = mode;\n    }\n\n    function clone(el) {\n        el.clone = document.createElement('div');\n\n        var refElement = el.node.nextSibling || el.node,\n            cloneStyle = el.clone.style;\n\n        cloneStyle.height = el.height + 'px';\n        cloneStyle.width = el.width + 'px';\n        cloneStyle.marginTop = el.computed.marginTop;\n        cloneStyle.marginBottom = el.computed.marginBottom;\n        cloneStyle.marginLeft = el.computed.marginLeft;\n        cloneStyle.marginRight = el.computed.marginRight;\n        cloneStyle.padding = cloneStyle.border = cloneStyle.borderSpacing = 0;\n        cloneStyle.fontSize = '1em';\n        cloneStyle.position = 'static';\n        cloneStyle.cssFloat = el.computed.cssFloat;\n\n        el.node.parentNode.insertBefore(el.clone, refElement);\n    }\n\n    function killClone(el) {\n        el.clone.parentNode.removeChild(el.clone);\n        el.clone = undefined;\n    }\n\n    function getElementParams(node) {\n        var computedStyle = getComputedStyle(node),\n            parentNode = node.parentNode,\n            parentComputedStyle = getComputedStyle(parentNode),\n            cachedPosition = node.style.position;\n\n        node.style.position = 'relative';\n\n        var computed = {\n                top: computedStyle.top,\n                marginTop: computedStyle.marginTop,\n                marginBottom: computedStyle.marginBottom,\n                marginLeft: computedStyle.marginLeft,\n                marginRight: computedStyle.marginRight,\n                cssFloat: computedStyle.cssFloat,\n                display: computedStyle.display\n            },\n            numeric = {\n                top: parseNumeric(computedStyle.top),\n                marginBottom: parseNumeric(computedStyle.marginBottom),\n                paddingLeft: parseNumeric(computedStyle.paddingLeft),\n                paddingRight: parseNumeric(computedStyle.paddingRight),\n                borderLeftWidth: parseNumeric(computedStyle.borderLeftWidth),\n                borderRightWidth: parseNumeric(computedStyle.borderRightWidth)\n            };\n\n        node.style.position = cachedPosition;\n\n        var css = {\n                position: node.style.position,\n                top: node.style.top,\n                bottom: node.style.bottom,\n                left: node.style.left,\n                right: node.style.right,\n                width: node.style.width,\n                marginTop: node.style.marginTop,\n                marginLeft: node.style.marginLeft,\n                marginRight: node.style.marginRight\n            },\n            nodeOffset = getElementOffset(node),\n            parentOffset = getElementOffset(parentNode),\n\n            parent = {\n                node: parentNode,\n                css: {\n                    position: parentNode.style.position\n                },\n                computed: {\n                    position: parentComputedStyle.position\n                },\n                numeric: {\n                    borderLeftWidth: parseNumeric(parentComputedStyle.borderLeftWidth),\n                    borderRightWidth: parseNumeric(parentComputedStyle.borderRightWidth),\n                    borderTopWidth: parseNumeric(parentComputedStyle.borderTopWidth),\n                    borderBottomWidth: parseNumeric(parentComputedStyle.borderBottomWidth)\n                }\n            },\n\n            el = {\n                node: node,\n                box: {\n                    left: nodeOffset.win.left,\n                    right: html.clientWidth - nodeOffset.win.right\n                },\n                offset: {\n                    top: nodeOffset.win.top - parentOffset.win.top - parent.numeric.borderTopWidth,\n                    left: nodeOffset.win.left - parentOffset.win.left - parent.numeric.borderLeftWidth,\n                    right: -nodeOffset.win.right + parentOffset.win.right - parent.numeric.borderRightWidth\n                },\n                css: css,\n                isCell: computedStyle.display == 'table-cell',\n                computed: computed,\n                numeric: numeric,\n                width: nodeOffset.win.right - nodeOffset.win.left,\n                height: nodeOffset.win.bottom - nodeOffset.win.top,\n                mode: -1,\n                inited: false,\n                parent: parent,\n                limit: {\n                    start: nodeOffset.doc.top - numeric.top,\n                    end: parentOffset.doc.top + parentNode.offsetHeight - parent.numeric.borderBottomWidth -\n                        node.offsetHeight - numeric.top - numeric.marginBottom\n                }\n            };\n\n        return el;\n    }\n\n    function getDocOffsetTop(node) {\n        var docOffsetTop = 0;\n\n        while (node) {\n            docOffsetTop += node.offsetTop;\n            node = node.offsetParent;\n        }\n\n        return docOffsetTop;\n    }\n\n    function getElementOffset(node) {\n        var box = node.getBoundingClientRect();\n\n            return {\n                doc: {\n                    top: box.top + win.pageYOffset,\n                    left: box.left + win.pageXOffset\n                },\n                win: box\n            };\n    }\n\n    function startFastCheckTimer() {\n        checkTimer = setInterval(function() {\n            !fastCheck() && rebuild();\n        }, 500);\n    }\n\n    function stopFastCheckTimer() {\n        clearInterval(checkTimer);\n    }\n\n    function handlePageVisibilityChange() {\n        if (!initialized) return;\n\n        if (document[hiddenPropertyName]) {\n            stopFastCheckTimer();\n        }\n        else {\n            startFastCheckTimer();\n        }\n    }\n\n    function init() {\n        if (initialized) return;\n\n        updateScrollPos();\n        initAll();\n\n        win.addEventListener('scroll', onScroll, { passive: true });\n        win.addEventListener('wheel', onWheel, { passive: true });\n\n        //watch for width changes\n        win.addEventListener('resize', rebuild);\n        win.addEventListener('orientationchange', rebuild);\n\n        //watch for page visibility\n        doc.addEventListener(visibilityChangeEventName, handlePageVisibilityChange);\n\n        startFastCheckTimer();\n\n        initialized = true;\n    }\n\n    function rebuild() {\n        if (!initialized) return;\n\n        deinitAll();\n\n        for (var i = watchArray.length - 1; i >= 0; i--) {\n            watchArray[i] = getElementParams(watchArray[i].node);\n        }\n\n        initAll();\n    }\n\n    function pause() {\n        win.removeEventListener('scroll', onScroll);\n        win.removeEventListener('wheel', onWheel);\n        win.removeEventListener('resize', rebuild);\n        win.removeEventListener('orientationchange', rebuild);\n        doc.removeEventListener(visibilityChangeEventName, handlePageVisibilityChange);\n\n        stopFastCheckTimer();\n\n        initialized = false;\n    }\n\n    function stop() {\n        pause();\n        deinitAll();\n    }\n\n    function kill() {\n        stop();\n\n        //empty the array without loosing the references,\n        //the most performant method according to http://jsperf.com/empty-javascript-array\n        while (watchArray.length) {\n            watchArray.pop();\n        }\n    }\n\n    function add(node) {\n        //check if Stickyfill is already applied to the node\n        for (var i = watchArray.length - 1; i >= 0; i--) {\n            if (watchArray[i].node === node) return;\n        };\n\n        var el = getElementParams(node);\n\n        watchArray.push(el);\n\n        if (!initialized) {\n            init();\n        }\n        else {\n            initElement(el);\n        }\n    }\n\n    function remove(node) {\n        for (var i = watchArray.length - 1; i >= 0; i--) {\n            if (watchArray[i].node === node) {\n                deinitElement(watchArray[i]);\n                watchArray.splice(i, 1);\n            }\n        };\n    }\n\n    //expose Stickyfill\n    return {\n        stickies: watchArray,\n        add: add,\n        remove: remove,\n        init: init,\n        rebuild: rebuild,\n        pause: pause,\n        stop: stop,\n        kill: kill\n    };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/stickyfill-web-module/dist/stickyfill.js\n// module id = 3\n// module chunks = 0 2 3","(function(exports) {\n  'use strict';\n\n  require('./../components/sticky.js');\n\n  var OpenListNav = require('../components/open-list-nav.js');\n\n  // exporting instance of OpenListNav because openListNav is\n  // referenced in the markup:\n  // _includes/hash_selecor.html\n  exports.openListNav = new OpenListNav();\n\n})(window);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/src/narrative.js\n// module id = 43\n// module chunks = 3","(function(exports) {\n    function getScrollTop() {\n      return (window.pageYOffset !== undefined)\n        ? window.pageYOffset\n        : (document.documentElement\n          || document.body.parentNode\n          || document.body).scrollTop;\n    }\n\n\n\n    exports.OpenListNav = function() {\n      // init OpenListNav Properties\n      this.active = this.stripHash(window.location.hash) || 'intro';\n      this.navItems = document.querySelectorAll('[data-nav-item]');\n      this.navSelect = $('[data-nav-options]');\n      this.navIsSelect = this.navSelect.length > 1;\n      // initialize at maximum value\n      this.defaultTop = 1e8;\n      this.closestToTop = this.defaultTop;\n      this.viewportElements = 0;\n      this.subnavItemClass = 'sticky_nav-nav_item-sub';\n      this.scrollTop = {\n        current: getScrollTop(),\n        prev: getScrollTop(),\n        direction: 'down'\n      };\n\n      this.registerEventHandlers();\n    };\n\n    exports.OpenListNav.prototype = {\n      updateScrollTop: function() {\n        this.scrollTop.prev = this.scrollTop.current;\n        this.scrollTop.current = getScrollTop();\n        this.scrollTop.direction = (\n          this.scrollTop.current >= this.scrollTop.prev\n        ) ? 'down' : 'up';\n      },\n\n      isActiveElement: function(el) {\n        if (!el) {\n          return;\n        }\n\n        var status = false;\n        var rect = el.getBoundingClientRect();\n\n        var elementInViewport = rect.bottom > 0 &&\n            rect.right > 0 &&\n            rect.left < (window.innerWidth ||\n                         document.documentElement.clientWidth) &&\n            rect.top < (window.innerHeight ||\n                        document.documentElement.clientHeight);\n\n        var elTop = Math.abs(rect.top);\n\n        if (elementInViewport && (elTop < this.closestToTop) ) {\n          this.closestToTop = elTop;\n          this.viewportElements++;\n          status = true;\n        } else if (elementInViewport &&\n                  (this.viewportElements < 1) &&\n                  (elTop >= this.closestToTop) ) {\n          this.viewportElements++;\n          status = true;\n        }\n\n        return status;\n      },\n\n      stripHash: function(str) {\n        return str.charAt(0) === '#'\n          ? str.slice(1, str.length)\n          : str;\n      },\n\n      resetTop: function() {\n        this.closestToTop = this.defaultTop;\n        this.viewportElements = 0;\n      },\n\n      removeActive: function() {\n        this.active = null;\n        for (var i = 0; i < this.navItems.length; i++) {\n          this.navItems[i].setAttribute('data-active', false);\n        }\n      },\n\n      addActive: function(el, name, parent) {\n        if (!el) {\n          el = document.querySelector('[data-nav-item=\"' + name + '\"]');\n          parent = document.querySelector('[data-nav-item=\"' + parent + '\"]');\n          this.active = this.stripHash(name);\n          el.setAttribute('data-active', true);\n          if (parent) {\n            parent.setAttribute('data-active', true);\n          }\n        } else {\n          this.active = this.stripHash(el.getAttribute('data-nav-item'));\n          el.setAttribute('data-active', true);\n          if (parent) {\n            parent.setAttribute('data-active', true);\n          }\n        }\n      },\n\n      update: function(el, name, parent) {\n        this.removeActive();\n        this.addActive(el, name, parent);\n      },\n\n      updateSelectField: function(newValue) {\n        if (newValue) {\n          this.navSelect.val(newValue);\n        }\n      },\n\n      registerEventHandlers: function() {\n        var self = this;\n        if (!this.navIsSelect) {\n          for (var i = 0; i < this.navItems.length; i++) {\n\n            var item = this.navItems[i];\n\n            if (!document.getElementById(item.dataset.navItem) && item) {\n              item.setAttribute('aria-hidden', true);\n              item.outerHTML = '';\n              item = undefined;\n            } else {\n              item.addEventListener('click', function() {\n                self.update(this);\n              });\n            }\n          }\n        }\n\n        window.addEventListener('scroll', function() {\n          self.updateScrollTop();\n          // TODO: throttle\n          self.detectNavChange();\n        });\n\n        window.addEventListener('resize', function() {\n          // TODO: throttle\n          self.detectNavChange();\n        });\n\n      },\n\n      changeHandler: function(selector) {\n        window.location.hash = selector.value;\n      },\n\n      detectNavChange: function() {\n        var self = this;\n\n        var items = this.navIsSelect\n          ? this.navSelect\n          : this.navItems;\n\n        Array.prototype.forEach.call(items, function(item) {\n          var parentName,\n            newName,\n            header,\n            isActiveElement;\n\n          if (!self.navIsSelect) {\n            header = document.getElementById(item.dataset.navItem);\n\n            isActiveElement = self.isActiveElement(header);\n\n            if (isActiveElement) {\n              newName = header.id;\n\n              if (item.classList.contains(self.subnavItemClass)) {\n                parentName = item.parentElement.previousElementSibling\n                .getAttribute('data-nav-item');\n              }\n\n              self.update(null, newName, parentName);\n\n            }\n          } else if (self.navIsSelect) {\n            Array.prototype.forEach.call(item, function(option) {\n\n              header = document.getElementById(option.value);\n              isActiveElement = self.isActiveElement(header);\n\n              if (isActiveElement && self.navIsSelect) {\n                newName = option.value;\n                self.updateSelectField(newName);\n              }\n            });\n          }\n\n        });\n\n        this.resetTop();\n      }\n    };\n\n    module.exports = exports.OpenListNav;\n  })(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/components/open-list-nav.js\n// module id = 7\n// module chunks = 0 3"],"sourceRoot":""}